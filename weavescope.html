
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Weavescope Â· IBM Cloud Kubernetes Service Lab</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-prism/prism-tomorrow.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-collapsible-chapters/collapsible-chapters.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-hints/plugin-hints.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fancybox/jquery.fancybox.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fancybox/jquery.fancybox-buttons.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-web-header/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="appendix-terraform.html" />
    
    
    <link rel="prev" href="appendix-create-cluster-cli.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Introduction</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                        <b>1.1.</b>
                    
                    Lab Overview
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Preparation</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="prepare-prereq.html">
            
                <a href="prepare-prereq.html">
            
                    
                        <b>2.1.</b>
                    
                    Pre-Requisites
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="prepare-plugins.html">
            
                <a href="prepare-plugins.html">
            
                    
                        <b>2.2.</b>
                    
                    Install Container Plugins
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="connect-to-ibm-cloud.html">
            
                <a href="connect-to-ibm-cloud.html">
            
                    
                        <b>2.3.</b>
                    
                    Connect to IBM Cloud
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="prepare-get-cluster.html">
            
                <a href="prepare-get-cluster.html">
            
                    
                        <b>2.4.</b>
                    
                    Get a cluster
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Lab 1 - Deploy an app in a Kubernetes cluster</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="view-cluster.html">
            
                <a href="view-cluster.html">
            
                    
                        <b>3.1.</b>
                    
                    View your cluster in the Console
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="kube-dashboard.html">
            
                <a href="kube-dashboard.html">
            
                    
                        <b>3.2.</b>
                    
                    Kubernetes Dashboard
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="connect-cli.html">
            
                <a href="connect-cli.html">
            
                    
                        <b>3.3.</b>
                    
                    Access your cluster through the CLI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="get-app.html">
            
                <a href="get-app.html">
            
                    
                        <b>3.4.</b>
                    
                    Get and run the app locally
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="docker-build.html">
            
                <a href="docker-build.html">
            
                    
                        <b>3.5.</b>
                    
                    Build docker image
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="docker-push.html">
            
                <a href="docker-push.html">
            
                    
                        <b>3.6.</b>
                    
                    Push docker image
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="deploy-app.html">
            
                <a href="deploy-app.html">
            
                    
                        <b>3.7.</b>
                    
                    Deploy app
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="scale-app.html">
            
                <a href="scale-app.html">
            
                    
                        <b>3.8.</b>
                    
                    Scale app
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.9" data-path="connect-database.html">
            
                <a href="connect-database.html">
            
                    
                        <b>3.9.</b>
                    
                    Optional: Connect to a database
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10" data-path="test-resiliency.html">
            
                <a href="test-resiliency.html">
            
                    
                        <b>3.10.</b>
                    
                    Optional: Test the resiliency
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.11" data-path="deploy-custom-domain.html">
            
                <a href="deploy-custom-domain.html">
            
                    
                        <b>3.11.</b>
                    
                    Optional: Use a custom domain
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.12" data-path="clean-up.html">
            
                <a href="clean-up.html">
            
                    
                        <b>3.12.</b>
                    
                    Clean up
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Lab 2 - DevOps and Helm charts</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="devops-helm.html">
            
                <a href="devops-helm.html">
            
                    
                        <b>4.1.</b>
                    
                    Deploy with Helm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="devops-continuous-delivery.html">
            
                <a href="devops-continuous-delivery.html">
            
                    
                        <b>4.2.</b>
                    
                    Deploy with Continuous Delivery
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="monitor-debug.html">
            
                <a href="monitor-debug.html">
            
                    
                        <b>4.3.</b>
                    
                    Optional: Troubleshoot and Debug
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Lab 3 - Monitor your cluster</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="monitor-cluster-logs.html">
            
                <a href="monitor-cluster-logs.html">
            
                    
                        <b>5.1.</b>
                    
                    Cluster Logs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="monitor-cluster-metrics.html">
            
                <a href="monitor-cluster-metrics.html">
            
                    
                        <b>5.2.</b>
                    
                    Monitoring your cluster
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Advanced</li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="appendix-create-cluster-cli.html">
            
                <a href="appendix-create-cluster-cli.html">
            
                    
                        <b>6.1.</b>
                    
                    Create a cluster with CLI
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="6.2" data-path="weavescope.html">
            
                <a href="weavescope.html">
            
                    
                        <b>6.2.</b>
                    
                    Weavescope
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="appendix-terraform.html">
            
                <a href="appendix-terraform.html">
            
                    
                        <b>6.3.</b>
                    
                    Provisioning with Terraform
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="calico.html">
            
                <a href="calico.html">
            
                    
                        <b>6.4.</b>
                    
                    Control traffic with Calico
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.5" data-path="appendix.html">
            
                <a href="appendix.html">
            
                    
                        <b>6.5.</b>
                    
                    Appendix
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Resources</li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="resources.html">
            
                <a href="resources.html">
            
                    
                        <b>7.1.</b>
                    
                    Resources
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Weavescope</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="optional---monitor-your-container-with-weave-scope">Optional - Monitor your container with Weave Scope</h1>
<p><a href="https://www.weave.works/docs/scope/latest/introducing/" target="_blank">Weave scope</a> provides a visual diagram of your resources within the kube cluster including services, pods, containers, processes, nodes, etc. Scope provides you interactive metrics for CPU and Memory and provides tools to tail and exec into a container. Scope is a powerful tool that you do not want to expose on the public internet.</p>
<p>     <a href="images/weavescope.png" rel="grouped" title="" target="_self" class="fancybox">
       <img src="images/weavescope.png" alt="">
     </a></p>
<p>To use weave scope securely with your Kubernetes cluster you can follow these steps.</p>
<ol>
<li><p>Deploy one of the provided RBAC permissions configuration file in the cluster.
 To enable read/write permissions:</p>
<pre class="language-"><code> kubectl apply -f &quot;https://raw.githubusercontent.com/IBM-Cloud/kube-samples/master/weave-scope/weave-scope-rbac.yaml&quot;
</code></pre><p> To enable read-only permissions:</p>
<pre class="language-"><code> kubectl apply --namespace weave -f &quot;https://raw.githubusercontent.com/IBM-Cloud/kube-samples/master/weave-scope/weave-scope-rbac-readonly.yaml&quot;
</code></pre></li>
<li><p>Deploy the Weave Scope service, which is privately accessible by the cluster IP address.</p>
<pre class="language-"><code> kubectl apply --namespace weave -f &quot;https://cloud.weave.works/k8s/scope.yaml?k8s-version=$(kubectl version | base64 | tr -d &apos;\n&apos;)&quot;
</code></pre></li>
<li><p>Run a port forwarding command to bring up the service on your computer.</p>
<pre class="language-"><code> kubectl port-forward -n weave &quot;$(kubectl get -n weave pod --selector=weave-scope-component=app -o jsonpath=&apos;{.items..metadata.name}&apos;)&quot; 4040
</code></pre></li>
<li><p>Open your web browser to
 <a href="http://localhost:4040" target="_blank">http://localhost:4040</a></p>
<blockquote>
<p>Weave Scope is a cpu heavy (especially the app). Scope is best utilized in a large cluster.</p>
</blockquote>
</li>
</ol>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="appendix-create-cluster-cli.html" class="navigation navigation-prev " aria-label="Previous page: Create a cluster with CLI">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="appendix-terraform.html" class="navigation navigation-next " aria-label="Next page: Provisioning with Terraform">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Weavescope","level":"6.2","depth":1,"next":{"title":"Provisioning with Terraform","level":"6.3","depth":1,"path":"appendix-terraform.md","ref":"appendix-terraform.md","articles":[]},"previous":{"title":"Create a cluster with CLI","level":"6.1","depth":1,"path":"appendix-create-cluster-cli.md","ref":"appendix-create-cluster-cli.md","articles":[]},"dir":"ltr"},"config":{"plugins":["prism","-highlight","collapsible-chapters","hints","copy-code-button","back-to-top-button","fancybox","web-header"],"root":"book","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"webheader":{"headerTitle":"IBM Cloud Kubernetes Service (IKS) Lab"},"prism":{"css":["prismjs/themes/prism-tomorrow.css"]},"fancybox":{"helpers":{"buttons":{}},"openEffect":"elastic","closeEffect":"elastic"},"web-header":{},"search":{},"collapsible-chapters":{},"hints":{"danger":"fa fa-exclamation-circle","info":"fa fa-info-circle","tip":"fa fa-mortar-board","working":"fa fa-wrench"},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"back-to-top-button":{},"copy-code-button":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":true}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"IBM Cloud Kubernetes Service Lab","gitbook":"3.2.3"},"file":{"path":"weavescope.md","mtime":"2018-11-11T11:11:11.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-11-11T11:11:11.000Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-collapsible-chapters/collapsible-chapters.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-copy-code-button/toggle.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fancybox/jquery.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fancybox/jquery.mousewheel.pack.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fancybox/jquery.fancybox.pack.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fancybox/jquery.fancybox-buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fancybox/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-web-header/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

